import{m as Y,W as c,n as p,ai as R,o as t,b as d,w as s,cS as Z,p as f,t as b,a as _,q as x,D as w,d as m,s as i,ay as j,av as F,bz as ee,F as K,aw as le,ei as ae,be as te,c as h,$ as V,a0 as se,N as L,e as N,x as $,aT as ie}from"./index-B6yCc2m_.js";const ne={value:{type:[String,Number,Boolean,Array],default:()=>null},multiple:Boolean,disabled:Boolean,size:String,clearable:Boolean,placeholder:String,selectedLabel:String,selected:Array,maxTagCount:Number,maxTagTextLength:Number,tagType:String,automaticDropdown:Boolean,filterable:Boolean,visible:Boolean,teleported:Boolean,persistent:Boolean,placement:String,transition:{type:String,default:"el-fade-in-linear"},popperOptions:Object,popperClass:String,popperWidth:[Number,String],selectClass:String,selectStyle:Object,inputStyle:Object,selectTagsStyle:Object},oe={"update:visible":o=>!0,removeTag:o=>!0,clear:()=>!0,focus:o=>!0,blur:o=>!0,filterChange:o=>!0},pe=Y({name:"EleBasicSelect",__name:"index",props:ne,emits:oe,setup(o,{expose:U,emit:W}){const l=o,n=W,v=c(null),T=c(null),C=c(null),g=c(l.multiple||!l.selectedLabel?"":l.selectedLabel),S=c(""),r=p(()=>l.multiple?!Array.isArray(l.value)||!l.value.length:l.value==null||l.value===""),E=p(()=>{const e=r.value&&l.placeholder?l.placeholder:"";return!l.filterable||!l.visible||l.multiple?e:l.selectedLabel||e}),z=p(()=>typeof l.maxTagCount=="number"&&l.selected!=null&&l.selected.length>l.maxTagCount),I=p(()=>!z.value||r.value||l.selected==null?l.selected||[]:l.selected.slice(0,l.maxTagCount)),O=p(()=>!z.value||r.value||l.selected==null?[]:l.selected.slice(l.maxTagCount)),k=p(()=>r.value||l.maxTagCount==null||l.maxTagCount<0?0:l.value.length-l.maxTagCount),q=()=>{v.value&&v.value.updatePopper()},B=e=>{if(l.filterable&&l.visible){if(e!=null&&e.target!=null){const a=e.target;if(a.nodeName&&a.nodeName.toLowerCase()==="input")return}const u=l.multiple?C.value:T.value;u&&u.focus()}},P=e=>{l.filterable&&l.visible&&l.multiple&&(S.value=e,n("filterChange",e))},A=e=>{l.filterable&&l.visible&&!l.multiple&&(g.value=e,n("filterChange",e))},y=e=>{(!l.disabled||!e)&&n("update:visible",e)},M=e=>{l.disabled||n("removeTag",e)},G=()=>{n("clear")},H=e=>{l.automaticDropdown&&l.visible&&e.stopPropagation()},J=e=>{l.automaticDropdown&&!l.visible&&y(!0),n("focus",e)},Q=e=>{n("blur",e)},D=e=>{!l.disabled&&l.visible&&(e.stopPropagation(),e.preventDefault(),y(!1))};return R(()=>l.selectedLabel,e=>{(!l.filterable||!l.visible)&&(g.value=l.multiple||!e?"":e)}),R(()=>l.visible,e=>{if(l.filterable)if(l.multiple)S.value="",e&&B();else{const u=l.selectedLabel;g.value=e||!u?"":u}}),U({tooltipRef:v,inputRef:T,searchRef:C,currentTags:I,omittedTags:O,omittedSize:k,updatePopper:q,focusSearchInput:B,updateSearchValue:P,updateInputValue:A,updateVisible:y}),(e,u)=>(t(),d(ie,{ref_key:"tooltipRef",ref:v,trigger:"click",visible:e.visible,disabled:e.disabled,placement:e.placement,teleported:e.teleported,width:e.popperWidth,popperClass:e.popperClass,popperOptions:e.popperOptions,transition:e.transition,gpuAcceleration:e.transition==="el-fade-in-linear",effect:"light",persistent:!0,isPopover:!0,triggerKeys:[],"onUpdate:visible":y},{body:s(()=>[e.persistent||e.visible?(t(),d(Z,{key:0,class:"ele-popover-body",onClick:B},{default:s(()=>[f(e.$slots,"default")]),_:3})):b("",!0)]),default:s(()=>[_("div",{class:x(["ele-select",e.selectClass,{"is-empty":r.value},{"is-multiple":e.multiple},{"is-disabled":e.disabled},{"is-filterable":e.filterable},{"is-small":e.size==="small"},{"is-large":e.size==="large"},{"is-opened":e.visible}]),style:w(e.selectStyle)},[m(i(j),{ref_key:"inputRef",ref:T,size:e.size,disabled:e.disabled,validateEvent:!1,modelValue:g.value,placeholder:e.filterable&&e.multiple&&e.visible?"":E.value,readonly:!e.filterable||!e.visible||e.multiple,style:w(e.inputStyle),"onUpdate:modelValue":A,onClick:H,onFocus:J,onBlur:Q,onKeydown:F(D,["esc"])},ee({suffix:s(()=>[e.clearable&&!e.disabled&&!r.value?(t(),d(i(K),{key:0,class:"ele-select-clear el-input__icon",onClick:le(G,["stop"])},{default:s(()=>[f(e.$slots,"clearIcon",{},()=>[m(i(ae))])]),_:3})):b("",!0),m(i(K),{class:"ele-select-arrow el-input__icon"},{default:s(()=>[f(e.$slots,"suffixIcon",{visible:e.visible},()=>[m(i(te))])]),_:3})]),_:2},[e.$slots.prefix?{name:"prefix",fn:s(()=>[f(e.$slots,"prefix")]),key:"0"}:void 0]),1032,["size","disabled","modelValue","placeholder","readonly","style"]),e.multiple?(t(),h("div",{key:0,class:"ele-select-tags",style:w(e.selectTagsStyle)},[(t(!0),h(V,null,se(I.value,(a,X)=>(t(),d(i(L),{key:X+"-"+a.value,size:e.size,type:e.tagType,closable:!e.disabled,disableTransitions:!0,title:a.label,onClose:re=>M(a)},{default:s(()=>[a.label&&e.maxTagTextLength&&a.label.length>e.maxTagTextLength?(t(),h(V,{key:0},[N($(a.label.slice(0,e.maxTagTextLength))+"... ",1)],64)):(t(),h(V,{key:1},[N($(a.label),1)],64))]),_:2},1032,["size","type","closable","title","onClose"]))),128)),z.value?(t(),d(i(L),{key:0,size:e.size,type:e.tagType,disableTransitions:!0},{default:s(()=>[f(e.$slots,"maxTagPlaceholder",{omittedValues:O.value,omittedSize:k.value},()=>[N(" +"+$(k.value),1)])]),_:3},8,["size","type"])):b("",!0),!e.disabled&&e.filterable?(t(),d(i(L),{key:1,size:e.size,disableTransitions:!0,class:"ele-select-search"},{default:s(()=>[m(i(j),{ref_key:"searchRef",ref:C,size:e.size,validateEvent:!1,modelValue:S.value,placeholder:E.value,"onUpdate:modelValue":P,onKeydown:F(D,["esc"])},null,8,["size","modelValue","placeholder"])]),_:1},8,["size"])):b("",!0)],4)):b("",!0)],6)]),_:3},8,["visible","disabled","placement","teleported","width","popperClass","popperOptions","transition","gpuAcceleration"]))}});export{pe as _};
