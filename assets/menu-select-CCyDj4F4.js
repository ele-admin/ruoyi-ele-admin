import{an as d,cU as x,W as h,n as V,c1 as w,o as s,b as l,bz as I,w as c,d as E,v as y,t as b,a as k,x as N,bI as M,ad as S,F as j}from"./index-B6yCc2m_.js";import"./tree-CopuO4KQ.js";import{E as P}from"./tree-select-BVEOGY61.js";async function B(a){const e=await d.get("/system/menu/list",{params:a});return e.data.code===200&&e.data.data?e.data.data.map(n=>{var r;const o=n.icon=="#"?void 0:n.icon;return{...n,icon:(r=x[o])!=null?r:o}}):Promise.reject(new Error(e.data.msg))}async function T(a){const e=await d.post("/system/menu",a);return e.data.code===200?e.data.msg:Promise.reject(new Error(e.data.msg))}async function U(a){const e=await d.put("/system/menu",a);return e.data.code===200?e.data.msg:Promise.reject(new Error(e.data.msg))}async function Y(a){const e=await d.delete("/system/menu/"+a);return e.data.code===200?e.data.msg:Promise.reject(new Error(e.data.msg))}const z={__name:"menu-select",props:{modelValue:[Number,String],placeholder:{type:String,default:"请选择上级菜单"}},emits:["update:modelValue"],setup(a,{expose:e,emit:n}){const o=n,r=a,u=h([]),_=t=>{o("update:modelValue",t||0)},i=V(()=>{var t;if(r.modelValue)return(t=w(u.value,f=>f.menuId==r.modelValue))==null?void 0:t.icon}),p=()=>{B().then(t=>{u.value=M({data:t,idField:"menuId",parentIdField:"parentId"})}).catch(t=>{S.error(t.message)})};return p(),e({reload:p}),(t,f)=>{const g=j,v=P;return s(),l(v,{clearable:"","check-strictly":"","default-expand-all":"",data:u.value,"node-key":"menuId",props:{label:"menuName"},"model-value":a.modelValue||void 0,placeholder:a.placeholder,class:"ele-fluid","popper-options":{strategy:"fixed"},"onUpdate:modelValue":_},I({default:c(({data:m})=>[m.icon?(s(),l(g,{key:0,style:{"margin-right":"4px",transform:"translateY(-1px)"}},{default:c(()=>[(s(),l(y(m.icon)))]),_:2},1024)):b("",!0),k("span",null,N(m.menuName),1)]),_:2},[i.value?{name:"prefix",fn:c(()=>[E(g,{color:"var(--el-text-color-regular)",style:{"margin-right":"6px"}},{default:c(()=>[(s(),l(y(i.value)))]),_:1})]),key:"0"}:void 0]),1032,["data","model-value","placeholder"])}}};export{z as _,T as a,B as l,Y as r,U as u};
