import{_ as L}from"./index-AmtRfZLy.js";import{aU as W,o as C,b as k,w as o,d as t,av as z,aw as K,s as d,e as g,ay as R,az as T,aV as P,E as h,aB as q,a$ as F,aW as A,W as E,aq as G,ad as w,aI as O,ah as H,b7 as J,b8 as Q,b9 as S,bd as X,a4 as Y,bb as Z,ae as ee,a8 as te,af as oe}from"./index-B6yCc2m_.js";import{_ as j}from"./index-BJMucfID.js";import{a as le}from"./index-C6QIYa0w.js";import{E as ae,a as se}from"./index-6AfRRrL-.js";/* empty css                     */import{u as ne,a as re,p as de,r as ie,e as ue}from"./index-DP49cPFF.js";import{E as me}from"./index-3i5fdD-M.js";import"./index-CtEHLY2Q.js";const pe={__name:"post-search",emits:["search"],setup(I,{emit:D}){const v=D,[m,f]=W({postCode:"",postName:"",status:void 0}),p=()=>{v("search",{...m})},_=()=>{f(),p()};return(N,a)=>{const $=R,b=T,y=ae,n=P,e=h,s=se,r=q,l=j;return C(),k(l,{"body-style":{paddingBottom:"2px"}},{default:o(()=>[t(r,{"label-width":"72px",onKeyup:z(p,["enter"]),onSubmit:a[3]||(a[3]=K(()=>{},["prevent"]))},{default:o(()=>[t(s,{gutter:8},{default:o(()=>[t(y,{lg:6,md:12,sm:12,xs:24},{default:o(()=>[t(b,{label:"岗位编码"},{default:o(()=>[t($,{clearable:"",modelValue:d(m).postCode,"onUpdate:modelValue":a[0]||(a[0]=i=>d(m).postCode=i),modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1}),t(y,{lg:6,md:12,sm:12,xs:24},{default:o(()=>[t(b,{label:"岗位名称"},{default:o(()=>[t($,{clearable:"",modelValue:d(m).postName,"onUpdate:modelValue":a[1]||(a[1]=i=>d(m).postName=i),modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1}),t(y,{lg:6,md:12,sm:12,xs:24},{default:o(()=>[t(b,{label:"状态"},{default:o(()=>[t(n,{code:"sys_normal_disable",modelValue:d(m).status,"onUpdate:modelValue":a[2]||(a[2]=i=>d(m).status=i),placeholder:"请选择"},null,8,["modelValue"])]),_:1})]),_:1}),t(y,{lg:6,md:12,sm:12,xs:24},{default:o(()=>[t(b,{"label-width":"16px"},{default:o(()=>[t(e,{type:"primary",onClick:p},{default:o(()=>a[4]||(a[4]=[g("查询")])),_:1}),t(e,{onClick:_},{default:o(()=>a[5]||(a[5]=[g("重置")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},ce={__name:"post-edit",props:F({data:Object},{modelValue:{type:Boolean},modelModifiers:{}}),emits:F(["done"],["update:modelValue"]),setup(I,{emit:D}){const v=I,m=D,f=A(I,"modelValue"),p=E(!1),_=E(!1),N=E(null),[a,$,b]=W({postId:void 0,postName:"",postCode:"",postSort:0,status:"0",remark:""}),y=G({postName:[{required:!0,message:"请输入岗位名称",type:"string",trigger:"blur"}],postCode:[{required:!0,message:"请输入岗位编码",type:"string",trigger:"blur"}],postSort:[{required:!0,message:"请输入岗位排序",type:"number",trigger:"blur"}]}),n=()=>{f.value=!1},e=()=>{var r,l;(l=(r=N.value)==null?void 0:r.validate)==null||l.call(r,i=>{if(!i)return;_.value=!0,(p.value?ne:re)(a).then(U=>{_.value=!1,w.success(U),n(),m("done")}).catch(U=>{_.value=!1,w.error(U.message)})})},s=()=>{v.data?(b(v.data),p.value=!0):($(),p.value=!1),O(()=>{O(()=>{var r,l;(l=(r=N.value)==null?void 0:r.clearValidate)==null||l.call(r)})})};return(r,l)=>{const i=R,V=T,U=me,B=P,x=q,u=h,M=H;return C(),k(M,{form:"",width:460,modelValue:f.value,"onUpdate:modelValue":l[6]||(l[6]=c=>f.value=c),title:p.value?"修改岗位":"添加岗位",onOpen:s},{footer:o(()=>[t(u,{onClick:n},{default:o(()=>l[7]||(l[7]=[g("取消")])),_:1}),t(u,{type:"primary",loading:_.value,onClick:e},{default:o(()=>l[8]||(l[8]=[g(" 保存 ")])),_:1},8,["loading"])]),default:o(()=>[t(x,{ref_key:"formRef",ref:N,model:d(a),rules:y,"label-width":"80px",onSubmit:l[5]||(l[5]=K(()=>{},["prevent"]))},{default:o(()=>[t(V,{label:"岗位名称",prop:"postName"},{default:o(()=>[t(i,{clearable:"",modelValue:d(a).postName,"onUpdate:modelValue":l[0]||(l[0]=c=>d(a).postName=c),placeholder:"请输入岗位名称"},null,8,["modelValue"])]),_:1}),t(V,{label:"岗位编码",prop:"postCode"},{default:o(()=>[t(i,{clearable:"",modelValue:d(a).postCode,"onUpdate:modelValue":l[1]||(l[1]=c=>d(a).postCode=c),placeholder:"请输入岗位编码"},null,8,["modelValue"])]),_:1}),t(V,{label:"岗位排序",prop:"postSort"},{default:o(()=>[t(U,{min:0,max:99999,modelValue:d(a).postSort,"onUpdate:modelValue":l[2]||(l[2]=c=>d(a).postSort=c),placeholder:"请输入岗位排序","controls-position":"right",class:"ele-fluid"},null,8,["modelValue"])]),_:1}),t(V,{label:"岗位状态",prop:"status"},{default:o(()=>[t(B,{code:"sys_normal_disable",type:"radio",modelValue:d(a).status,"onUpdate:modelValue":l[3]||(l[3]=c=>d(a).status=c)},null,8,["modelValue"])]),_:1}),t(V,{label:"备注"},{default:o(()=>[t(i,{rows:4,type:"textarea",modelValue:d(a).remark,"onUpdate:modelValue":l[4]||(l[4]=c=>d(a).remark=c),placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}},ke=Object.assign({name:"SystemPost"},{__name:"index",setup(I){const[D]=J(["sys_normal_disable"]),v=E(null),m=E([{type:"selection",columnKey:"selection",width:50,align:"center",fixed:"left"},{type:"index",columnKey:"index",width:50,align:"center",fixed:"left"},{prop:"postCode",label:"岗位编码",align:"center",minWidth:110},{prop:"postName",label:"岗位名称",align:"center",minWidth:110},{prop:"postSort",label:"岗位排序",align:"center",minWidth:110},{prop:"status",label:"状态",width:90,align:"center",minWidth:110,slot:"status",formatter:n=>{var e;return(e=D.value.find(s=>s.dictValue==n.status))==null?void 0:e.dictLabel}},{prop:"createTime",label:"创建时间",align:"center",width:180},{columnKey:"action",label:"操作",width:140,align:"center",slot:"action",hideInPrint:!0,hideInExport:!0}]),f=E([]),p=E(null),_=E(!1),N=({pages:n,where:e,orders:s})=>de({...e,...s,...n}),a=n=>{var e,s;(s=(e=v.value)==null?void 0:e.reload)==null||s.call(e,{page:1,where:n})},$=n=>{p.value=n!=null?n:null,_.value=!0},b=n=>{const e=n==null?f.value:[n];if(!e.length){w.error("请至少选择一条数据");return}ee.confirm(`是否确认删除岗位编码为"${e.map(s=>s.postCode).join()}"的数据项?`,"系统提示",{type:"warning",draggable:!0}).then(()=>{const s=w.loading({message:"请求中..",plain:!0});ie(e.map(r=>r.postId)).then(()=>{s.close(),w.success("删除成功"),a()}).catch(r=>{s.close(),w.error(r.message)})}).catch(()=>{})},y=()=>{var e,s;const n=w.loading({message:"请求中..",plain:!0});(s=(e=v.value)==null?void 0:e.fetch)==null||s.call(e,({where:r,orders:l})=>{ue({...r,...l}).then(()=>{n.close()}).catch(i=>{n.close(),w.error(i.message)})})};return(n,e)=>{const s=h,r=P,l=te,i=oe,V=le,U=j,B=L,x=Q("permission");return C(),k(B,null,{default:o(()=>[t(pe,{onSearch:a}),t(U,{"body-style":{paddingTop:"8px"}},{default:o(()=>[t(V,{ref_key:"tableRef",ref:v,"row-key":"postId",columns:m.value,datasource:N,"show-overflow-tooltip":!0,selections:f.value,"onUpdate:selections":e[2]||(e[2]=u=>f.value=u),"highlight-current-row":"","export-config":{fileName:"岗位数据"},"cache-key":"systemPostTable"},{toolbar:o(()=>[S((C(),k(s,{type:"primary",class:"ele-btn-icon",icon:d(X),onClick:e[0]||(e[0]=u=>$())},{default:o(()=>e[4]||(e[4]=[g(" 新建 ")])),_:1},8,["icon"])),[[x,"system:post:add"]]),S((C(),k(s,{type:"danger",class:"ele-btn-icon",icon:d(Y),onClick:e[1]||(e[1]=u=>b())},{default:o(()=>e[5]||(e[5]=[g(" 删除 ")])),_:1},8,["icon"])),[[x,"system:post:remove"]]),S((C(),k(s,{class:"ele-btn-icon",icon:d(Z),onClick:y},{default:o(()=>e[6]||(e[6]=[g(" 导出 ")])),_:1},8,["icon"])),[[x,"system:post:export"]])]),status:o(({row:u})=>[t(r,{code:"sys_normal_disable",type:"tag","model-value":u.status},null,8,["model-value"])]),action:o(({row:u})=>[S((C(),k(l,{type:"primary",underline:!1,onClick:M=>$(u)},{default:o(()=>e[7]||(e[7]=[g(" 修改 ")])),_:2},1032,["onClick"])),[[x,"system:post:edit"]]),S(t(i,{direction:"vertical"},null,512),[[x,["system:post:edit","system:post:remove"]]]),S((C(),k(l,{type:"danger",underline:!1,onClick:M=>b(u)},{default:o(()=>e[8]||(e[8]=[g(" 删除 ")])),_:2},1032,["onClick"])),[[x,"system:post:remove"]])]),_:1},8,["columns","selections"])]),_:1}),t(ce,{modelValue:_.value,"onUpdate:modelValue":e[3]||(e[3]=u=>_.value=u),data:p.value,onDone:a},null,8,["modelValue","data"])]),_:1})}}});export{ke as default};
